---
import PageWithSidebar from "../layouts/PageWithSidebar.astro";
import PostContentSingle from "../components/PostContentSingle.astro";
import ShareMenu from "../components/ShareMenu.astro";
import { getCollection } from "astro:content";
import { getPostUrl } from "../utils/postUrl";

const posts = (await getCollection("blog")).sort(
  (a, b) => b.data.date.valueOf() - a.data.date.valueOf(),
);
const latestPost = posts[0];
const { Content } = await latestPost.render();
const permalink = getPostUrl(latestPost.slug);
---

<PageWithSidebar isHome={true} showShareNav={true}>
  <ShareMenu
    slot="before-main"
    permalink={permalink}
    title={latestPost.data.title}
    author={latestPost.data.author}
  />
  <PostContentSingle post={latestPost} Content={Content} isH1={false} />
</PageWithSidebar>
